# Лабораторна Робота 2

## 1\. Декомпозиція Системи на Компоненти

На основі **Мікросервісної Архітектури** та рішенні про використання **Спільного Docker Volume**, система "Image Processing API & Worker System" декомпонована на три основні сервіси та одне спільне сховище.

| Назва Компонента | Тип | Технологія / Роль |
| :--- | :--- | :--- |
| **Image-API-Gateway** | Сервіс (Go) | Вхідна точка, приймає HTTP-запити. |
| **Image-Worker-Service** | Сервіс (Go) | Виконавець обчислювальних завдань. |
| **Redis** | Сервіс (Redis) | **Message Queue** (для завдань) та **Cache** (для статусів/метаданих). |
| **Storage (Shared Volume)** | Сховище | **Спільна файлова система** для обміну зображеннями. |

## 2\. Опис Компонентів та Інтерфейсів

### 2.1. Image-API-Gateway

  * **Призначення:** Єдиний шлюз для зовнішнього світу. Відповідає за валідацію, збереження файлу та постановку завдання в чергу.
  * **Потрібні Інтерфейси (Required Interfaces):** `Redis_Queue` (для постановки завдань), `Redis_Cache` (для перевірки статусу), `Storage_Write` (для збереження оригінального файлу на Volume).

### 2.2. Image-Worker-Service

  * **Призначення:** Обробка зображень у фоновому режимі. Слухає чергу, зчитує файл із Volume та зберігає результат назад.
  * **Потрібні Інтерфейси (Required Interfaces):** `Redis_Queue` (для споживання завдань), `Redis_Cache` (для оновлення статусу), `Storage_Read/Write` (для доступу до файлів через Volume).

### 2.3. Redis (Message Queue & Cache)

  * **Призначення:** Брокер повідомлень для асинхронної взаємодії та високошвидкісне сховище для статусів.

### 2.4. Storage (Shared Docker Volume)

  * **Призначення:** Надання спільного, ізольованого простору для зберігання файлів, доступного одночасно для контейнерів API та Worker.

## 3\. Взаємодія Компонентів

| Взаємодія | Протокол | Учасники | Опис |
| :--- | :--- | :--- | :--- |
| **1. Збереження Оригіналу** | File System Access | API-Gateway → Storage | API зберігає завантажений файл безпосередньо у спільному томі. |
| **2. Запуск Завдання** | Message Queue (PUSH) | API-Gateway → Redis | API публікує повідомлення, що містить шлях до файлу у Volume. |
| **3. Виконання Завдання** | Message Queue (POP) | Worker-Service ← Redis | Worker отримує завдання. |
| **4. Обробка та Збереження** | File System Access | Worker-Service ↔ Storage | Worker зчитує файл та зберігає готовий результат назад у Volume. |
| **5. Перевірка Статусу** | Cache (GET/SET) | API-Gateway ↔ Redis | API перевіряє статус завдання, використовуючи Redis. |

-----

## UML Діаграма Компонентів (Component Diagram)

<img width="935" height="230" alt="image" src="https://github.com/user-attachments/assets/0c0b225a-033c-4294-96a9-62d377a3e69a" />

