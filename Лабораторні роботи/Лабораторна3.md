# Лабораторна Робота 3
## 1. Сценарій Взаємодії
**Сценарій:** Асинхронний запуск завдання на обробку зображення, моніторинг статусу та отримання результату.

| Ділянка | Тип Взаємодії | Протокол / Механізм |
| :--- | :--- | :--- |
| **Клієнт ↔ API-Шлюз** | **Синхронна** | HTTP REST (GET, POST) |
| **API-Шлюз ↔ Worker** | **Асинхронна** | Redis Message Queue |
| **API/Worker ↔ Сховище** | Прямий доступ | Shared Docker Volume |

Обрання **асинхронної моделі** є критичним, оскільки обробка зображень є довготривалою операцією, що вимагає негайного звільнення клієнта та API-шлюзу від очікування.

---

## 2. Діаграма Послідовності (Sequence Diagram)

Діаграма ілюструє покроковий порядок виконання асинхронного завдання, від Клієнта до фінального отримання обробленого файлу.



### 2.1. Послідовність Дій
1.  **POST /upload (Синхронний виклик):** Клієнт надсилає файл і параметри обробки.
2.  **Запис Оригіналу:** API-Шлюз зберігає отриманий файл у **Сховище (Volume)**.
3.  **PUSH Завдання (Асинхронно):** API-Шлюз відправляє JSON-повідомлення (з ID завдання та шляхом до файлу) у **Redis Чергу**.
4.  **202 Accepted:** API-Шлюз миттєво повертає `job_id` клієнту.
5.  **BLPOP Завдання (Асинхронний прийом):** **Сервіс Обробки (Worker)** блокуючо очікує і отримує повідомлення з черги.
6.  **Обробка:** Worker оновлює статус у **Redis Кеші**, зчитує файл зі **Сховища**, виконує обробку (патерн Strategy) і записує результат назад.
7.  **Оновлення Статусу (Завершено):** Worker фіксує статус `COMPLETED` у Кеші.
8.  **GET /status (Клієнт):** Клієнт перевіряє Кеш через API-Шлюз і отримує URL для завантаження.
9.  **GET /download (Клієнт):** Клієнт завантажує оброблений файл через API-Шлюз.

---

## 3. Діаграма Розгортання (Deployment Diagram)

Діаграма демонструє фізичне розміщення та зв'язки між програмними артефактами (контейнерами) та фізичним вузлом (хостом).



### 3.1. Опис Елементів Розгортання
* **Хост-Сервер (Docker Engine):** Єдиний фізичний/віртуальний вузол, який виконує всі контейнери.
* **Контейнери (Артефакти):**
    * `API-Шлюз Контейнер`: Містить бінарний код Go для обробки HTTP-запитів.
    * `Worker-Сервіс Контейнер`: Містить бінарний код Go для асинхронної обробки.
    * `Redis Контейнер`: Містить інфраструктурний сервіс для черг та кешування.
* **Shared Docker Volume (Сховище):** Спільний ресурс, до якого обидва прикладні контейнери мають **прямий доступ** через механізм монтування томів Docker.
* **Зв'язки:** Взаємодія між контейнерами відбувається через внутрішню мережу Docker. Зовнішній клієнт підключається лише до `API-Шлюз Контейнера` через HTTP.

## 3. UML Діаграми Послідовності (Sequence Diagram)

<img width="1157" height="631" alt="image" src="https://github.com/user-attachments/assets/cdb1b278-5fc9-45a0-87db-2ce9af7a48cb" />


## 4. UML Діаграма Розгортання (Deployment Diagram)

<img width="751" height="347" alt="image" src="https://github.com/user-attachments/assets/8da33835-33d2-471d-bf45-63bbc372a755" />
